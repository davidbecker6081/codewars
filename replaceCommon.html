<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Replace Most Common Letter</title>
  </head>
  <body>
    <p>Find the most common letter (not space) in the string (always lowercase and 2 < words) and replace it with the letter.</p>
    <p>If such letters are two or more, choose the one that appears in the string earlier.</p>
    <p>('great job go ahead', 'k') => 'grekt job go khekd'</p>
    <script type="text/javascript">
    function replaceCommon(string, newLetter) {
      const objectOfTimes = [...string].reduce((stringObj, letter) => {
        if (!stringObj[letter] && letter !== ' ') {
          stringObj[letter] = 1
        } else if (letter !== ' ') {
          stringObj[letter] += 1
        }
        return stringObj
      }, {});

      let mostCommon = 0;
      let commonLetter = '';

      Object.keys(objectOfTimes).forEach(letter => {
        if (objectOfTimes[letter] > mostCommon) {
          commonLetter = letter
          mostCommon = objectOfTimes[letter]
        }
      });

      const newArr = [...string];
      const newString = [...string].forEach((letter, i, arr) => {
          if (letter === commonLetter) {
            newArr.splice(i, 1, newLetter)
          }
        });

      return newArr.join('')
    }
    </script>
  </body>
</html>
